{"version":3,"file":"primary-table.js","sources":["../../src/table/primary-table.tsx"],"sourcesContent":["import { computed, defineComponent, toRefs, h, ref, onMounted, getCurrentInstance } from 'vue';\nimport get from 'lodash/get';\nimport omit from 'lodash/omit';\nimport baseTableProps from './base-table-props';\nimport primaryTableProps from './primary-table-props';\nimport BaseTable from './base-table';\nimport { useTNodeJSX } from '../hooks/tnode';\nimport useColumnController from './hooks/useColumnController';\nimport useRowExpand from './hooks/useRowExpand';\nimport useTableHeader, { renderTitle } from './hooks/useTableHeader';\nimport useRowSelect from './hooks/useRowSelect';\nimport { TdPrimaryTableProps, PrimaryTableCol, TableRowData, PrimaryTableCellParams } from './type';\nimport useSorter from './hooks/useSorter';\nimport useFilter from './hooks/useFilter';\nimport useDragSort from './hooks/useDragSort';\nimport useAsyncLoading from './hooks/useAsyncLoading';\nimport EditableCell, { EditableCellProps } from './editable-cell';\nimport { PageInfo } from '../pagination';\nimport useClassName from './hooks/useClassName';\nimport useEditableRow from './hooks/useEditableRow';\nimport useStyle from './hooks/useStyle';\nimport { ScrollToElementParams } from '../hooks/useVirtualScrollNew';\nimport { BaseTableProps } from './interface';\n\nexport { BASE_TABLE_ALL_EVENTS } from './base-table';\n\nconst OMIT_PROPS = [\n  'hideSortTips',\n  'dragSort',\n  'defaultExpandedRowKeys',\n  'defaultSelectedRowKeys',\n  'columnController',\n  'filterRow',\n  'sortOnRowDraggable',\n  'expandOnRowClick',\n  'expand-on-row-click',\n  'expanded-row',\n  'editable-row-keys',\n  'editable-cell-state',\n  'filter-value',\n  'multipleSort',\n  'expandIcon',\n  'expand-icon',\n  'reserveSelectedRowOnPaginate',\n  'expandedRowKeys',\n  'expandedRow',\n  'reserve-selected-row-on-paginate',\n  'reserveSelectedRowOnPaginate',\n  'selected-row-keys',\n  'selectedRowKeys',\n  'selectOnRowClick',\n  'column-controller',\n  'columnController',\n  'dragSort',\n  'drag-sort',\n  'hideSortTips',\n  'showSortColumnBgColor',\n  'filter-row',\n  'filterRow',\n  'multiple-sort',\n  'multipleSort',\n  'async-loading',\n  'onChange',\n  'onAsyncLoadingClick',\n  'onColumnChange',\n  'onColumnControllerVisibleChange',\n  'onDataChange',\n  'onDisplayColumnsChange',\n  'onDragSort',\n  'onExpandChange',\n  'onFilterChange',\n  'onSelectChange',\n  'onSortChange',\n];\n\nexport default defineComponent({\n  name: 'TPrimaryTable',\n\n  props: {\n    ...baseTableProps,\n    ...primaryTableProps,\n  },\n\n  setup(props, context) {\n    const renderTNode = useTNodeJSX();\n    const { columns, columnController } = toRefs(props);\n    const primaryTableRef = ref(null);\n    const showElement = ref(false);\n\n    const { classPrefix, tableDraggableClasses, tableBaseClass, tableSelectedClasses, tableSortClasses } =\n      useClassName();\n    const { sizeClassNames } = useStyle(props);\n    // 自定义列配置功能\n    const { tDisplayColumns, renderColumnController } = useColumnController(props, context);\n\n    // 展开/收起行功能\n    const { showExpandedRow, showExpandIconColumn, getExpandColumn, renderExpandedRow, onInnerExpandRowClick } =\n      useRowExpand(props, context);\n\n    // 排序功能\n    const { renderSortIcon } = useSorter(props, context);\n\n    // 行选中功能\n    const {\n      selectColumn,\n      showRowSelect,\n      selectedRowClassNames,\n      currentPaginateData,\n      formatToRowSelectColumn,\n      setTSelectedRowKeys,\n      onInnerSelectRowClick,\n      handleRowSelectWithAreaSelection,\n    } = useRowSelect(props, tableSelectedClasses);\n\n    // 过滤功能\n    const {\n      hasEmptyCondition,\n      isTableOverflowHidden,\n      renderFilterIcon,\n      renderFirstFilterRow,\n      setFilterPrimaryTableRef,\n    } = useFilter(props, context);\n\n    const tableKey = ref(1);\n\n    const onTableRefresh = () => {\n      tableKey.value += 1;\n    };\n\n    // 拖拽排序功能\n    const dragSortParams = computed(() => ({\n      showElement: showElement.value,\n      onTableRefresh,\n      tableKey: tableKey.value,\n    }));\n    const {\n      isRowHandlerDraggable,\n      isRowDraggable,\n      isColDraggable,\n      innerPagination,\n      setDragSortPrimaryTableRef,\n      setDragSortColumns,\n    } = useDragSort(props, context, dragSortParams);\n\n    const { renderTitleWidthIcon } = useTableHeader(props);\n    const { renderAsyncLoading } = useAsyncLoading(props);\n\n    // 可编辑行\n    const {\n      errorListMap,\n      editableKeysMap,\n      validateRowData,\n      validateTableData,\n      onRuleChange,\n      clearValidateData,\n      onUpdateEditedCell,\n      getEditRowData,\n      onPrimaryTableCellEditChange,\n    } = useEditableRow(props);\n\n    const innerKeyboardRowHover = computed(() => Boolean(showExpandedRow.value || showRowSelect.value));\n\n    const innerDisableSpaceInactiveRow = computed(() => Boolean(showExpandedRow.value || showRowSelect.value));\n\n    const primaryTableClasses = computed(() => {\n      return {\n        [tableDraggableClasses.colDraggable]: isColDraggable.value,\n        [tableDraggableClasses.rowHandlerDraggable]: isRowHandlerDraggable.value,\n        [tableDraggableClasses.rowDraggable]: isRowDraggable.value,\n        [tableBaseClass.overflowVisible]: isTableOverflowHidden.value === false,\n        [tableBaseClass.tableRowEdit]: props.editableRowKeys,\n        [`${classPrefix}-table--select-${selectColumn.value?.type}`]: selectColumn.value,\n        [`${classPrefix}-table--row-select`]: showRowSelect.value,\n        [`${classPrefix}-table--row-expandable`]: showExpandedRow.value,\n      };\n    });\n\n    // 如果想给 TR 添加类名，请在这里补充，不要透传更多额外 Props 到 BaseTable\n    const tRowClassNames = computed(() => {\n      const tClassNames = [props.rowClassName, selectedRowClassNames.value];\n      return tClassNames.filter((v) => v);\n    });\n\n    // 如果想给 TR 添加属性，请在这里补充，不要透传更多额外 Props 到 BaseTable\n    const tRowAttributes = computed(() => {\n      const tAttributes = [props.rowAttributes];\n      if (isRowHandlerDraggable.value || isRowDraggable.value) {\n        tAttributes.push(({ row }) => ({ 'data-id': get(row, props.rowKey || 'id') }));\n      }\n      return tAttributes.filter((v) => v);\n    });\n\n    // 多个 Hook 共用 primaryTableRef\n    onMounted(() => {\n      setFilterPrimaryTableRef(primaryTableRef.value);\n      setDragSortPrimaryTableRef(primaryTableRef.value);\n    });\n\n    // 对外暴露的方法\n    context.expose({\n      validateRowData,\n      validateTableData,\n      clearValidateData,\n      refreshTable: () => {\n        primaryTableRef.value.refreshTable();\n      },\n      scrollToElement: (data: ScrollToElementParams) => {\n        primaryTableRef.value.scrollToElement(data);\n      },\n      scrollColumnIntoView: (colKey: string) => {\n        primaryTableRef.value.scrollColumnIntoView(colKey);\n      },\n      // 暴露基础表格 ref 及相关方法\n      baseTableRef: primaryTableRef,\n    });\n\n    const onEditableCellChange: EditableCellProps['onChange'] = (params) => {\n      props.onRowEdit?.(params);\n      const rowValue = get(params.editedRow, props.rowKey || 'id');\n      onUpdateEditedCell(rowValue, params.row, {\n        [params.col.colKey]: params.value,\n      });\n    };\n\n    // 1. 影响列数量的因素有：自定义列配置、展开/收起行、多级表头；2. 影响表头内容的因素有：排序图标、筛选图标\n    const getColumns = (columns: PrimaryTableCol<TableRowData>[], parentDisplay = false) => {\n      const arr: PrimaryTableCol<TableRowData>[] = [];\n      for (let i = 0, len = columns.length; i < len; i++) {\n        let item = { ...columns[i] };\n        // 自定义列显示控制\n        const isDisplayColumn = item.children?.length || tDisplayColumns.value?.includes(item.colKey);\n        if (\n          !isDisplayColumn &&\n          (props.columnController || props.displayColumns || props.defaultDisplayColumns) &&\n          !parentDisplay\n        )\n          continue;\n        item = formatToRowSelectColumn(item);\n        const { sort } = props;\n        if (item.sorter && props.showSortColumnBgColor) {\n          const sorts = sort instanceof Array ? sort : [sort];\n          const sortedColumn = sorts.find(\n            (sort) => sort && sort.sortBy === item.colKey && sort.descending !== undefined,\n          );\n          if (sortedColumn) {\n            item.className =\n              item.className instanceof Array\n                ? item.className.concat(tableSortClasses.sortColumn)\n                : [item.className, tableSortClasses.sortColumn];\n          }\n        }\n        // 添加排序图标和过滤图标\n        if (item.sorter || item.filter) {\n          const titleContent = renderTitle(context.slots, item, i);\n          const { ellipsisTitle } = item;\n          item.title = (h, p) => {\n            const sortIcon = item.sorter ? renderSortIcon(p) : null;\n            const filterIcon = item.filter ? renderFilterIcon(p) : null;\n            // @ts-ignore 注意：此处 Vue2 和 Vue3 有所不同\n            const attach = primaryTableRef.value?.tableContentRef;\n            return renderTitleWidthIcon(\n              [titleContent, sortIcon, filterIcon],\n              p.col,\n              p.colIndex,\n              ellipsisTitle,\n              attach,\n              {\n                classPrefix,\n                ellipsisOverlayClassName: props.size !== 'medium' ? sizeClassNames[props.size] : '',\n              },\n            );\n          };\n          item.ellipsisTitle = false;\n        }\n        // 如果是单元格可编辑状态\n        if (item.edit?.component) {\n          const oldCell = item.cell;\n          item.cell = (h, p: PrimaryTableCellParams<TableRowData>) => {\n            const cellProps: EditableCellProps = {\n              ...p,\n              row: getEditRowData(p),\n              oldCell,\n              rowKey: props.rowKey || 'id',\n              tableBaseClass,\n              cellEmptyContent: props.cellEmptyContent,\n              onChange: onEditableCellChange,\n              onValidate: props.onRowValidate,\n              onRuleChange,\n              onEditableChange: onPrimaryTableCellEditChange,\n            };\n            if (props.editableRowKeys) {\n              const rowValue = get(p.row, props.rowKey || 'id');\n              cellProps.editable = editableKeysMap.value[rowValue] || false;\n              const key = [rowValue, p.col.colKey].join('__');\n              const errorList = errorListMap.value?.[key];\n              errorList && (cellProps.errors = errorList);\n            }\n            if (props.editableCellState) {\n              cellProps.readonly = !props.editableCellState(p);\n            }\n            return <EditableCell {...cellProps} v-slots={context.slots} onUpdateEditedCell={onUpdateEditedCell} />;\n          };\n        }\n        if (item.children?.length) {\n          item.children = getColumns(item.children, parentDisplay || tDisplayColumns.value?.includes(item.colKey));\n        }\n        // 多级表头和自定义列配置特殊逻辑：要么子节点不存在，要么子节点长度大于 1，方便做自定义列配置\n        if (!item.children || item.children?.length) {\n          arr.push(item);\n        }\n      }\n      return arr;\n    };\n\n    const tColumns = computed(() => {\n      const cols = getColumns(columns.value);\n      if (showExpandIconColumn.value) {\n        cols.unshift(getExpandColumn());\n      }\n      return cols;\n    });\n\n    const onInnerPageChange = (pageInfo: PageInfo, newData: Array<TableRowData>) => {\n      innerPagination.value = { ...innerPagination.value, ...pageInfo };\n      currentPaginateData.value = newData;\n      props.onPageChange?.(pageInfo, newData);\n      const changeParams: Parameters<TdPrimaryTableProps['onChange']> = [\n        { pagination: pageInfo },\n        { trigger: 'pagination', currentData: newData },\n      ];\n      props.onChange?.(...changeParams);\n      // 是否在分页时保留选中结果，如果不保留则需清空\n      if (!props.reserveSelectedRowOnPaginate) {\n        setTSelectedRowKeys([], {\n          selectedRowData: [],\n          type: 'uncheck',\n          currentRowKey: 'CLEAR_ON_PAGINATE',\n        });\n      }\n    };\n\n    const onInnerActiveRowAction: BaseTableProps['onActiveRowAction'] = (params) => {\n      props.onActiveRowAction?.(params);\n      handleRowSelectWithAreaSelection(params);\n    };\n\n    const onSingleRowClick: TdPrimaryTableProps['onRowClick'] = (params) => {\n      if (props.expandOnRowClick) {\n        onInnerExpandRowClick(params);\n      }\n      if (props.selectOnRowClick) {\n        onInnerSelectRowClick(params);\n      }\n    };\n\n    // handle click and dblclick exits at the same time\n    let timer: any;\n    const DURATION = 250;\n    const onInnerRowClick: TdPrimaryTableProps['onRowClick'] = (params) => {\n      // no dbl click conflict, no delay\n      if (!props.onRowDblclick) {\n        onSingleRowClick(params);\n        return;\n      }\n      if (timer) {\n        // dblclick\n        clearTimeout(timer);\n        timer = undefined;\n      } else {\n        timer = setTimeout(() => {\n          onSingleRowClick(params);\n          timer = undefined;\n        }, DURATION);\n      }\n    };\n\n    const onShowElementChange = (val: boolean) => {\n      showElement.value = val;\n    };\n\n    return () => {\n      const formatNode = (\n        api: string,\n        renderInnerNode: Function,\n        condition: boolean,\n        extra?: { reverse?: boolean },\n      ) => {\n        if (!condition) return props[api];\n        const innerNode = renderInnerNode(h);\n        const propsNode = renderTNode(api);\n        if (innerNode && !propsNode) return () => innerNode;\n        if (propsNode && !innerNode) return () => propsNode;\n        if (innerNode && propsNode) {\n          return () =>\n            extra?.reverse ? (\n              <div>\n                {innerNode}\n                {propsNode}\n              </div>\n            ) : (\n              <div>\n                {propsNode}\n                {innerNode}\n              </div>\n            );\n        }\n        return null;\n      };\n      const isColumnController = !!(columnController.value && Object.keys(columnController.value).length);\n      // @ts-ignore\n      const placement = isColumnController ? columnController.value.placement || 'top-right' : '';\n      const isBottomController = isColumnController && placement?.indexOf('bottom') !== -1;\n      const topContent = formatNode('topContent', renderColumnController, isColumnController && !isBottomController);\n      const bottomContent = formatNode('bottomContent', renderColumnController, isBottomController, {\n        reverse: true,\n      });\n      const firstFullRow = formatNode('firstFullRow', renderFirstFilterRow, !hasEmptyCondition.value);\n      const lastFullRow = formatNode('lastFullRow', renderAsyncLoading, !!props.asyncLoading);\n\n      // important for base-table controlled properties\n      const { vnode } = getCurrentInstance();\n\n      const baseTableProps: BaseTableProps = {\n        ...omit(vnode.props, OMIT_PROPS),\n        rowKey: props.rowKey,\n        rowClassName: tRowClassNames.value,\n        rowAttributes: tRowAttributes.value,\n        columns: tColumns.value,\n        keyboardRowHover: props.keyboardRowHover ?? innerKeyboardRowHover.value,\n        disableSpaceInactiveRow: props.disableSpaceInactiveRow ?? innerDisableSpaceInactiveRow.value,\n        topContent,\n        bottomContent,\n        firstFullRow,\n        lastFullRow,\n        thDraggable: ['col', 'row-handler-col'].includes(props.dragSort),\n        onShowElementChange,\n        onPageChange: onInnerPageChange,\n        renderExpandedRow: showExpandedRow.value ? renderExpandedRow : undefined,\n        onActiveRowAction: onInnerActiveRowAction,\n      };\n\n      if (props.expandOnRowClick || props.selectOnRowClick) {\n        baseTableProps.onRowClick = onInnerRowClick;\n      }\n\n      return (\n        <BaseTable\n          v-slots={context.slots}\n          {...baseTableProps}\n          ref={primaryTableRef}\n          class={primaryTableClasses.value}\n          onLeafColumnsChange={setDragSortColumns}\n        />\n      );\n    };\n  },\n});\n"],"names":["OMIT_PROPS","defineComponent","name","props","_objectSpread","baseTableProps","primaryTableProps","setup","context","renderTNode","useTNodeJSX","_toRefs","toRefs","columns","columnController","primaryTableRef","ref","showElement","_useClassName","useClassName","classPrefix","tableDraggableClasses","tableBaseClass","tableSelectedClasses","tableSortClasses","_useStyle","useStyle","sizeClassNames","_useColumnController","useColumnController","tDisplayColumns","renderColumnController","_useRowExpand","useRowExpand","showExpandedRow","showExpandIconColumn","getExpandColumn","renderExpandedRow","onInnerExpandRowClick","_useSorter","useSorter","renderSortIcon","_useRowSelect","useRowSelect","selectColumn","showRowSelect","selectedRowClassNames","currentPaginateData","formatToRowSelectColumn","setTSelectedRowKeys","onInnerSelectRowClick","handleRowSelectWithAreaSelection","_useFilter","useFilter","hasEmptyCondition","isTableOverflowHidden","renderFilterIcon","renderFirstFilterRow","setFilterPrimaryTableRef","tableKey","onTableRefresh","value","dragSortParams","computed","_useDragSort","useDragSort","isRowHandlerDraggable","isRowDraggable","isColDraggable","innerPagination","setDragSortPrimaryTableRef","setDragSortColumns","_useTableHeader","useTableHeader","renderTitleWidthIcon","_useAsyncLoading","useAsyncLoading","renderAsyncLoading","_useEditableRow","useEditableRow","errorListMap","editableKeysMap","validateRowData","validateTableData","onRuleChange","clearValidateData","onUpdateEditedCell","getEditRowData","onPrimaryTableCellEditChange","innerKeyboardRowHover","Boolean","innerDisableSpaceInactiveRow","primaryTableClasses","_selectColumn$value","_defineProperty","colDraggable","rowHandlerDraggable","rowDraggable","overflowVisible","tableRowEdit","editableRowKeys","concat","type","tRowClassNames","tClassNames","rowClassName","filter","v","tRowAttributes","tAttributes","rowAttributes","push","_ref2","row","get","rowKey","onMounted","expose","refreshTable","scrollToElement","data","scrollColumnIntoView","colKey","baseTableRef","onEditableCellChange","params","_props$onRowEdit","onRowEdit","call","rowValue","editedRow","col","getColumns","parentDisplay","arguments","length","undefined","arr","_loop","_item$children","_tDisplayColumns$valu","_item$edit","_item$children2","_item$children3","item","i","isDisplayColumn","children","includes","displayColumns","defaultDisplayColumns","sort","sorter","showSortColumnBgColor","sorts","Array","sortedColumn","find","sortBy","descending","className","sortColumn","titleContent","renderTitle","slots","_item","ellipsisTitle","title","h","p","_primaryTableRef$valu","sortIcon","filterIcon","attach","tableContentRef","colIndex","ellipsisOverlayClassName","size","edit","component","oldCell","cell","cellProps","cellEmptyContent","onChange","onValidate","onRowValidate","onEditableChange","_errorListMap$value","editable","key","join","errorList","errors","editableCellState","readonly","_createVNode","EditableCell","_mergeProps","_tDisplayColumns$valu2","len","tColumns","cols","unshift","onInnerPageChange","pageInfo","newData","_props$onPageChange","_props$onChange","onPageChange","changeParams","pagination","trigger","currentData","apply","reserveSelectedRowOnPaginate","selectedRowData","currentRowKey","onInnerActiveRowAction","_props$onActiveRowAct","onActiveRowAction","onSingleRowClick","expandOnRowClick","selectOnRowClick","timer","DURATION","onInnerRowClick","onRowDblclick","clearTimeout","setTimeout","onShowElementChange","val","_props$keyboardRowHov","_props$disableSpaceIn","formatNode","api","renderInnerNode","condition","extra","innerNode","propsNode","reverse","isColumnController","Object","keys","placement","isBottomController","indexOf","topContent","bottomContent","firstFullRow","lastFullRow","asyncLoading","_getCurrentInstance","getCurrentInstance","vnode","omit","keyboardRowHover","disableSpaceInactiveRow","thDraggable","dragSort","onRowClick","BaseTable"],"mappings":"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"}